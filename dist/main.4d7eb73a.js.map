{"version":3,"sources":["model.js","view.js","controller.js","main.js"],"names":["Model","todos","JSON","parse","localStorage","getItem","id","text","complete","console","log","onTodoListChanged","setItem","stringify","todoText","todo","length","push","_commit","updatedText","map","filter","callback","View","app","getElement","title","createElement","textContent","form","input","type","placeholder","name","submitButton","todoList","append","_temporaryTodoText","_initLocalListeners","addEventListener","e","target","className","innerText","tag","element","document","classList","add","selector","querySelector","value","firstChild","removeChild","p","forEach","li","checkbox","checked","span","contentEditable","strike","deleteButton","handler","preventDefault","_todoText","_resetInput","parseInt","parentElement","Controller","model","view","displayTodo","addTodo","editTodo","deleteTodo","toggleTodo","bindAddTodo","handleAddTodo","bindDeleteTodo","handleDeleteTodo","bindToggleTodo","handleToggleTodo","bindEditTodo","handleEditTodo","bindTodoListChanged"],"mappings":"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","file":"main.4d7eb73a.js","sourceRoot":"..\\src","sourcesContent":["export class Model {\r\n    constructor() {\r\n        // The state of the model, an array of to projects, prepopulated with some data\r\n        this.todos = JSON.parse(localStorage.getItem('todos')) || []\r\n        this.todos = [\r\n            {id: 1, text: 'Run a marathon', complete: false},\r\n            {id: 2, text: 'Plant a garden', complete: false},\r\n        ]\r\n        console.log(this.todos)\r\n    }\r\n    _commit(todos){\r\n        this.onTodoListChanged(todos)\r\n        console.log('Localstorage')\r\n        localStorage.setItem('todos',JSON.stringify(todos))\r\n    }\r\n\r\n    addTodo(todoText) {\r\n        const todo = {\r\n            id: this.todos.length > 0 ? this.todos[this.todos.length - 1].id + 1 : 1,\r\n            text: todoText,\r\n            complete: false\r\n        }\r\n        this.todos.push(todo)\r\n        this.onTodoListChanged(this.todos)\r\n        this._commit(this.todos)\r\n    }\r\n\r\n    editTodo(id, updatedText) {\r\n        this.todos = this.todos.map((todo) =>\r\n            todo.id === id ? {id: todo.id, text: updatedText, complete: todo.complete} : todo\r\n        )\r\n        this.onTodoListChanged(this.todos)\r\n        this._commit(this.todos)\r\n    }\r\n\r\n    deleteTodo(id) {\r\n        this.todos = this.todos.filter((todo) => todo.id !== id)\r\n        this.onTodoListChanged(this.todos)\r\n        this._commit(this.todos)\r\n    }\r\n\r\n    toggleTodo(id) {\r\n        this.todos = this.todos.map((todo) => todo.id === id ? {\r\n            id: todo.id,\r\n            text: todo.text,\r\n            complete: !todo.complete\r\n        } : todo)\r\n        this.onTodoListChanged(this.todos)\r\n        this._commit(this.todos)\r\n    }\r\n\r\n    bindTodoListChanged(callback){\r\n        this.onTodoListChanged = callback\r\n    }\r\n}\r\n","\r\nexport class View {\r\n    constructor() {\r\n        // The root element\r\n        this.app = this.getElement('#root')\r\n\r\n        // The title of the app\r\n        this.title = this.createElement('hi')\r\n        this.title.textContent = 'Todos'\r\n\r\n        // Create the form element\r\n        this.form = this.createElement('form')\r\n        this.input = this.createElement('input')\r\n\r\n        this.input.type = 'text'\r\n        this.input.placeholder = 'Add todo'\r\n        this.input.name = 'todo'\r\n\r\n        this.submitButton = this.createElement('button')\r\n        this.submitButton.textContent = 'Submit'\r\n\r\n        this.todoList = this.createElement('ul', 'todo-list')\r\n        this.form.append(this.input, this.submitButton)\r\n\r\n        this.app.append(this.title, this.form, this.todoList)\r\n\r\n        this._temporaryTodoText = ''\r\n        this._initLocalListeners()\r\n        console.log(this._temporaryTodoText)\r\n    }\r\n    _initLocalListeners(){\r\n        this.todoList.addEventListener('input',e=>{\r\n            if(e.target.className ==='editable'){\r\n                this._temporaryTodoText = e.target.innerText\r\n            }\r\n        })\r\n    }\r\n    createElement(tag, className) {\r\n        const element = document.createElement(tag)\r\n        if (className) {\r\n            element.classList.add(className)\r\n        }\r\n\r\n        return element\r\n    }\r\n\r\n    getElement(selector) {\r\n        return document.querySelector(selector)\r\n\r\n    }\r\n\r\n    get _todoText() {\r\n        return this.input.value\r\n    }\r\n\r\n    _resetInput() {\r\n        this.input.value = ''\r\n    }\r\n\r\n    displayTodo(todos) {\r\n        while (this.todoList.firstChild) {\r\n            this.todoList.removeChild(this.todoList.firstChild)\r\n        }\r\n        if (todos.length === 0) {\r\n            const p = this.createElement('p')\r\n            p.textContent = ' Nothing to do?'\r\n            this.todoList.append(p)\r\n        } else {\r\n            todos.forEach(todo => {\r\n                const li = this.createElement('li')\r\n                li.id = todo.id\r\n\r\n                const checkbox = this.createElement('input')\r\n                checkbox.type = 'checkbox'\r\n                checkbox.checked = todo.complete\r\n\r\n                const span = this.createElement('span')\r\n                span.contentEditable = true\r\n                span.classList.add('editable')\r\n\r\n                if (todo.complete) {\r\n                    const strike = this.createElement('s')\r\n                    strike.textContent = todo.text\r\n                    span.append(strike)\r\n                } else {\r\n                    span.textContent = todo.text\r\n                }\r\n\r\n                const deleteButton = this.createElement('button', 'delete')\r\n                deleteButton.textContent = 'Delete'\r\n                li.append(checkbox, span, deleteButton)\r\n\r\n                this.todoList.append(li)\r\n            })\r\n        }\r\n    }\r\n    bindAddTodo(handler){\r\n        this.form.addEventListener('submit', e =>{\r\n            e.preventDefault()\r\n            if (this._todoText){\r\n                handler(this._todoText)\r\n                this._resetInput()\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    bindDeleteTodo(handler){\r\n        this.todoList.addEventListener('click',e =>{\r\n            if(e.target.className === 'delete'){\r\n                const id = parseInt(e.target.parentElement.id)\r\n                handler(id)\r\n            }\r\n        })\r\n    }\r\n\r\n    bindToggleTodo(handler){\r\n        this.todoList.addEventListener('change',e=>{\r\n            if(e.target.type === 'checkbox'){\r\n                const id = parseInt(e.target.parentElement.id)\r\n                handler(id)\r\n            }\r\n        })\r\n    }\r\n\r\n    bindEditTodo(handler){\r\n        this.todoList.addEventListener('focusout',e=>{\r\n            if(this._temporaryTodoText){\r\n                const id = parseInt(e.target.parentElement.id)\r\n                handler(id,this._temporaryTodoText)\r\n                this._temporaryTodoText = ''\r\n            }\r\n        })\r\n    }\r\n}","export class Controller {\r\n    constructor(model, view) {\r\n        this.model = model\r\n        this.view = view\r\n\r\n        this.view.bindAddTodo(this.handleAddTodo)\r\n        this.view.bindDeleteTodo(this.handleDeleteTodo)\r\n        this.view.bindToggleTodo(this.handleToggleTodo)\r\n        this.view.bindEditTodo(this.handleEditTodo)\r\n        this.onTodoListChanged(this.model.todos)\r\n        this.model.bindTodoListChanged(this.onTodoListChanged)\r\n    }\r\n\r\n    onTodoListChanged = (todos) => {\r\n        this.view.displayTodo(todos)\r\n    }\r\n\r\n    handleAddTodo = (todoText) => {\r\n        this.model.addTodo(todoText)\r\n    }\r\n    handleEditTodo = (id, todoText) => {\r\n        this.model.editTodo(id, todoText)\r\n    }\r\n    handleDeleteTodo = (id) => {\r\n        console.log('delete')\r\n        this.model.deleteTodo(id)\r\n    }\r\n    handleToggleTodo = (id) => {\r\n        this.model.toggleTodo(id)\r\n    }\r\n}\r\n\r\n","import { Model } from \"./model\";\r\nimport { View } from \"./view\";\r\nimport {Controller} from \"./controller\";\r\n\r\nnew Controller(new Model(), new View())\r\n"]}